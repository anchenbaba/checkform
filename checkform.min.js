/*! checkform v1.3 | (c) 2015 jQuery 表单验证插件. | www.anchen8.net/license */
!function($){$.fn.checkform=function(options){var formname,items,formItems,i,i2,rule,placeholder,ruleTest,passwordStrongTest,ajax,fieldCheck,validate,ajaxSubmit,o=$(this);if(o.is("form")){for(formname=o.attr("name")||o.attr("id")||"form1",options=$.extend({},$.checkform.defaults,options||{}),options.root||$("script").each(function(a,b){miuScript=$(b).get(0).src.match(/(.*)checkform(\.min)?\.js$/),null!==miuScript&&(options.root=miuScript[1])}),0==$("link[href$='checkform.css']").length&&$("head").append('<link href="'+options.root+'checkform.css" rel="stylesheet" rev="stylesheet" type="text/css" />'),items=o.find("input[validate],select[validate],textarea[validate]"),formItems=[],$.each(items,function(index,val){var v2,v=$(this).attr("validate");null!=v&&""!=v&&(v2=eval("("+v+")"),v2.name=this.name,formItems.push(v2))}),i=options.items.length-1;i>=0;i--)for(i2 in formItems)options.items[i]["name"]==formItems[i2]["name"]&&options.items.splice(i,1);return options.items=options.items.concat(formItems),formItems=null,items=null,rule=$.checkform.rules,placeholder=function(){var b,a="placeholder"in document.createElement("input");a||(b=$("input[placeholder],textarea[placeholder]"),$.each(b,function(){var c=$(this);(""==c.val()||c.val()==c.attr("placeholder"))&&(c.addClass("placeholder"),c.val(c.attr("placeholder")),"password"==c.attr("type"))}),b.focus(function(){var a=$(this);a.val()==a.attr("placeholder")&&(a.val(""),a.removeClass("placeholder"))}).blur(function(){var a=$(this);(""==a.val()||a.val()==a.attr("placeholder"))&&(a.addClass("placeholder"),a.val(a.attr("placeholder")),"password"==a.attr("type"))}))},ruleTest=function(){var c,d,a=!0,b=arguments;return rule.hasOwnProperty(b[0])&&(c=rule[b[0]][0],d=b[1],a=b.length>2?c.apply(arguments,[].slice.call(b,1)):$.isFunction(c)?c(d):c.test(d)),a},passwordStrongTest=function(a){options.fieldPwdStrong&&$.isFunction(options.fieldPwdStrong)&&a.keyup(function(){var c=$(this).val(),d=c.length,e=0;d>0&&(e+=4>=d?5:d>=8?25:10,e+=c.match(/[a-z]/i)?c.match(/[a-z]/)&&c.match(/[A-Z]/)?20:10:0,e+=c.match(/[0-9]/)?c.match(/[0-9]/g).length>=3?20:10:0,e+=c.match(/[\W_]/)?c.match(/[\W_]/g).length>1?25:10:0,e+=c.match(/[0-9]/)&&c.match(/[a-z]/i)?c.match(/[\W_]/)?c.match(/[a-z]/)&&c.match(/[A-Z]/)?5:3:2:0),options.fieldPwdStrong(e,a,o)})},ajax=function(a,b,c){b=encodeURI(b),$.ajax({type:a.ajax.method||"POST",url:a.ajax.url,data:a.name+"="+b,cache:!1,async:a.ajax.async||!0,beforeSend:function(){c.data("ajax_checking",0),options.fieldTips(c,"检测中...",formname)}}).done(function(b){var f;1==b.status?(f=b.info||a.success,options.fieldSuccess(c,f,formname),c.data("ajax_checking",1),c.data("ajax_msg",f)):0==b.status?(f=b.info||a.error,options.fieldError(c,f,formname),c.data("ajax_msg",f)):(f=b.info||a.error||"返回信息错误",options.fieldError(c,f,formname),c.data("ajax_msg",f))}).fail(function(){options.fieldError(c,"检测失败",formname),c.data("ajax_checking",-9),c.data("ajax_msg","检测失败")}).always(function(){})},fieldCheck=function(a,b){var g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,c=$.trim(a.val()),d=!0,e="",f="boolean"==typeof b.require?b.require:!0;for(g=options.items.length-1;g>=0;g--)if(options.items[g]["name"]==a.attr("name")){if(1==a.length||a.is(":radio")){if(f&&(a.is(":radio")||a.is(":checkbox"))&&!a.is(":checked"))e=void 0==b.error?"必须选择":b.error,d=!1;else if(f&&""==c)e=void 0==b.error?a.is("select")?"必须选择":"不能为空":b.error,d=!1;else if(""!=c&&((b.min||b.max)&&(h=c.length,i=b.min||0,j=b.max,e=void 0==b.error?j?"长度范围应在"+i+"~"+j+"之间":"长度应大于"+i:b.error,(j&&(h>j||i>h)||!j&&i>h)&&(d=!1)),d&&b.rule&&(k=b.to?$.trim($("[name='"+b.to+"']",o).val()):b.value,l=k?ruleTest(b.rule,c,k):ruleTest(b.rule,c),void 0==b.error?(e=rule[b.rule][1],k&&(e+="password"==$("[name='"+b.to+"']",o).attr("type")?"输入的密码":k)):e=b.error,l||(d=!1)),d&&b.eq&&(m=b.eq||0,c!=m&&(e=void 0==b.error?"必须等于"+m:b.error,d=!1)),d&&b.neq&&(n=b.neq||0,c==n&&(e=void 0==b.error?"必须不等于"+n:b.error,d=!1)),d&&b.gt&&(p=b.gt||0,p>=c&&(e=void 0==b.error?"必须大于"+p:b.error,d=!1)),d&&b.gte&&(q=b.gte||0,q>c&&(e=void 0==b.error?"必须大于等于"+q:b.error,d=!1)),d&&b.lt&&(r=b.lt||0,c>=r&&(e=void 0==b.error?"必须小于"+r:b.error,d=!1)),d&&b.lte&&(s=b.lte||0,c>s&&(e=void 0==b.error?"必须小于等于"+s:b.error,d=!1)),d&&b.between&&(t=b.between[0],u=b.between[1],c>=+t&&+u>=c||(e=void 0==b.error?"必须在"+t+"到"+u:b.error,d=!1)),d&&b.ajax)){if(a.attr("last_val")!=a.val()){ajax(b,c,a),a.attr("last_val",a.val());continue}if(1==a.data("ajax_checking"))b.success=a.data("ajax_msg");else{if(0!=a.data("ajax_checking")){ajax(b,c,a),a.attr("last_val",a.val());continue}e=a.data("ajax_msg"),d=!1}}}else a.is("input:checkbox")&&(v=0,a.each(function(){1==this.checked&&v++}),b.checked_limit&&(i=b.checked_limit[0]||1,j=b.checked_limit[1]||null,e=void 0==b.error?i==j?"请必须选择"+i+"项":j?"请选择"+i+"到"+j+"项目":"请至少选择"+i+"项":b.error,(j&&(v>j||i>v)||!j&&i>v)&&(d=!1)));return d?(a.data("is_checked",1),options.fieldSuccess(a,b.success,formname),!0):(a.data("is_checked",0),options.fieldError(a,e,formname),!1)}return!0},validate=function(){var a=!0,b=options.isBubble?!0:!1,c=!0;return $.each(options.items,function(d,e){var f=$("[name='"+this.name+"']",o);return f.length>0?1==f.data("is_checked")?!0:b?(c=fieldCheck(f,e),0==c&&1==a&&(a=!1),!0):a=fieldCheck(f,e):void 0}),1==a&&$("input,select,textarea",o).data("is_checked",0),a},ajaxSubmit=function(a){var e,c=a.url||$.trim(o.attr("action")),d=a.type||$.trim(o.attr("method"))||"POST";return c&&(c=(c.match(/^([^#]+)/)||[])[1]),c=c||window.location.href||"",e=o.serialize(),$.ajax({url:c,type:d,dataType:a.dataType,data:e,beforeSend:function(b){a.beforeSend(o,b)}}).done(function(b,c,d){a.clearForm&&o.clearForm(),a.success(o,b,c,d)}).fail(function(b,c,d){a.error(o,b,c,d)}).always(function(b,c,d){a.complete(o,b,c,d)}),!1},$.each(options.items,function(a,b){var d,e,c=$("[name='"+this.name+"']",o);c.length>0&&(d="boolean"==typeof b.require?b.require:!0,options.require&&d&&(options.require===!0?e=b.tips||rule[b.rule][1]||"":"placeholder"==options.require?(e=c.attr("placeholder")||b.tips||rule[b.rule][1]||"",c.attr("placeholder",e),e=""):e=options.require,options.fieldRequire(c,e,formname)),c.is(":file")||c.is("select")?c.change(function(){fieldCheck(c,b)}).focus(function(){var a=b.tips||rule[b.rule][1]||"";options.fieldTips(c,a,formname)}):(c.blur(function(){fieldCheck(c,b)}).focus(function(){var a=b.tips||rule[b.rule][1]||"";options.fieldTips(c,a,formname)}),c.is(":password")&&passwordStrongTest(c)))}),placeholder(),this.each(function(){options.isAjaxSubmit?o.submit(function(){return validate()&&ajaxSubmit(options),!1}):o.submit(validate)})}},$.fn.addRules=function(a){return this.each(function(){$.extend($.checkform.rules,a||{});for(var b in $.checkform.rules)(null==$.checkform.rules[b]||void 0==$.checkform.rules[b])&&delete $.checkform.rules[b]})},$.checkform=function(){},$.checkform.tipsname=function(a,b){return b=b.replace(/(\.|\[|\])/g,""),a+"_tips_"+b},$.checkform.fieldPwdStrong=function(a,b,c){var e,d=$(".checkform_pwdstrong",c);0!=d.length&&(e=d.children(".checkform_pwdstrong_line"),0==a?e.css("background","#d6d3d3"):a>0&&50>a?(e.eq(0).css("background","#ff3300"),e.eq(1).css("background","#d6d3d3"),e.eq(2).css("background","#d6d3d3"),e.eq(3).css("background","#d6d3d3")):a>=50&&60>a?(e.eq(0).css("background","#ff3300"),e.eq(1).css("background","#099"),e.eq(2).css("background","#d6d3d3"),e.eq(3).css("background","#d6d3d3")):a>=60&&80>a?(e.eq(0).css("background","#ff3300"),e.eq(1).css("background","#099"),e.eq(2).css("background","#060"),e.eq(3).css("background","#d6d3d3")):a>=80&&(e.eq(0).css("background","#ff3300"),e.eq(1).css("background","#099"),e.eq(2).css("background","#060"),e.eq(3).css("background","black")))},$.checkform.fieldShowFloatTips=function(a,b,c,d,e){var f,g,h,i;f=c.stayShow?"checkform_float_tips_"+$.checkform.tipsname(e,a.attr("name")):"checkform_float_tips",g=$("#"+f),d=d?"checkform_float_tips checkform_float_tips_"+d:"checkform_float_tips",g.length||($('<div id="'+f+'" style="position: absolute;z-index:3000"><div style="position: relative;"><div class="checkform_float_anglel"><i class="checkform_float_anglel_icon"></i></div><div class="checkform_float_tips"></div></div></div>').appendTo("body"),g=$("#"+f)),h=a.next().length>0?a.nextAll(":last"):a,i=h.offset(),b?g.show():g.hide(),g.css({top:i.top-2+(c.top?c.top:0),left:i.left+h.width()+18+(c.left?c.left:0),width:c.width}),$(g.find(".checkform_float_tips")[0]).width(c.width-30).html(c.change?c.change(a,b):b).attr("class",d)},$.checkform.fieldRequire=function(a,b,c){var f,d=$.checkform.tipsname(c,a.attr("name")),e=$("#"+d);e.length>0&&e.remove(),f=a.next().length>0?a.nextAll(":last"):a,f.after("<span id='"+d+"' class='checkform_require'> "+b+" </span>")},$.checkform.fieldTips=function(a,b,c){var d,e,f;return $.isEmptyObject(this.floatTips)?(d=$.checkform.tipsname(c,a.attr("name")),e=$("#"+d),e.length>0&&e.remove(),f=a.next().length>0?a.nextAll(":last"):a,f.after("<span id='"+d+"' class='checkform_tips'> "+b+" </span>"),void 0):($.checkform.fieldShowFloatTips(a,b,this.floatTips,"",c),void 0)},$.checkform.fieldSuccess=function(a,b,c){var d,e,f;return""==b&&(b="√"),$.isEmptyObject(this.floatTips)?(d=$.checkform.tipsname(c,a.attr("name")),e=$("#"+d),e.length>0&&e.remove(),void 0!=b&&(f=a.next().length>0?a.nextAll(":last"):a,f.after("<span id='"+d+"' class='checkform_success'> "+b+" </span>")),void 0):($.checkform.fieldShowFloatTips(a,b,this.floatTips,"success",c),void 0)},$.checkform.fieldError=function(a,b,c){var d,e,f;return(void 0==b||""==b)&&(b="X"),$.isEmptyObject(this.floatTips)?(d=$.checkform.tipsname(c,a.attr("name")),e=$("#"+d),e.length>0&&e.remove(),f=a.next().length>0?a.nextAll(":last"):a,f.after("<span id='"+d+"' class='checkform_error'> "+b+" </span>"),void 0):($.checkform.fieldShowFloatTips(a,b,this.floatTips,"error",c),void 0)},$.ajaxsendform=function(){},$.ajaxsendform.success=function(){console.log("success")},$.ajaxsendform.error=function(){alert("数据发送失败")},$.ajaxsendform.complete=function(a){$("input:submit",a).removeAttr("disabled"),$("input:submit",a).val("提交完成")},$.ajaxsendform.beforeSend=function(a){$("input:submit",a).val("正在提交"),$("input:submit",a).attr("disabled","disabled")},$.checkform.defaults={items:[],isBubble:!1,isAjaxSubmit:!1,type:"POST",dataType:"json",success:$.ajaxsendform.success,error:$.ajaxsendform.error,complete:$.ajaxsendform.complete,beforeSend:$.ajaxsendform.beforeSend,clearForm:!0,root:"",require:"",fieldRequire:$.checkform.fieldRequire,fieldTips:$.checkform.fieldTips,fieldSuccess:$.checkform.fieldSuccess,fieldError:$.checkform.fieldError,fieldPwdStrong:$.checkform.fieldPwdStrong,floatTips:{}},$.checkform.rules={eng:[/^[A-Za-z]+$/,"只能输入英文"],chn:[/^[\u0391-\uFFE5]+$/,"只能输入汉字"],mail:[/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,"格式不正确"],url:[/^http[s]?:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,"格式不正确"],currency:[/^\d+(\.\d+)?$/,"数字格式有误"],number:[/^\d+$/,"只能为数字"],"int":[/^[0-9]{1,30}$/,"只能为整数"],"double":[/^[-\+]?\d+(\.\d+)?$/,"只能为带小数的数字"],username:[/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){3,19}$/,"英文开头,数字和英文及下划线和点的组合，3-19个字符"],password:[/^(\w){6,20}$/,"只能为数字和英文及下划线的组合，6-20个字符"],strongpwd:[/^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$/,"至少7个字符，必须同时含有字母和数字,或者字母大小写"],safe:[/>|<|,|\[|\]|\{|\}|\?|\/|\+|=|\||\'|\\|\"|:|;|\~|\!|\@|\#|\*|\$|\%|\^|\&|\(|\)|`/i,"不能有特殊字符"],dbc:[/[ａ-ｚＡ-Ｚ０-９！＠＃￥％＾＆＊（）＿＋｛｝［］｜：＂＇；．，／？＜＞｀～　]/,"不能有全角字符"],qq:[/[1-9][0-9]{4,}/,"格式不正确"],date:[/^((((1[6-9]|[2-9]\d)\d{2})-(0?[13578]|1[02])-(0?[1-9]|[12]\d|3[01]))|(((1[6-9]|[2-9]\d)\d{2})-(0?[13456789]|1[012])-(0?[1-9]|[12]\d|30))|(((1[6-9]|[2-9]\d)\d{2})-0?2-(0?[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))-0?2-29-))$/,"格式不正确"],telephone:[/^1\d{10}$/,"格式不正确"],mobilephone:[/^((\+86)|(86))?1[3|4|5|7|8]\d{9}$/,"格式不正确"],zipcode:[/^[1-9]\d{5}$/,"格式不正确"],bodycard:[/^((1[1-5])|(2[1-3])|(3[1-7])|(4[1-6])|(5[0-4])|(6[1-5])|71|(8[12])|91)\d{4}((19\d{2}(0[13-9]|1[012])(0[1-9]|[12]\d|30))|(19\d{2}(0[13578]|1[02])31)|(19\d{2}02(0[1-9]|1\d|2[0-8]))|(19([13579][26]|[2468][048]|0[48])0229))\d{3}(\d|X|x)?$/,"格式不正确"],ip:[/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,"IP不正确"],eq:[function(a,b){return a==b?!0:!1},"必须等于"],gt:[function(a,b){return a>b?!0:!1},"必须大于"],gte:[function(a,b){return a>=b?!0:!1},"必须大于或等于"],lt:[function(a,b){return b>a?!0:!1},"必须小于"],lte:[function(a,b){return b>=a?!0:!1},"必须小于或等于"]},$.fn.clearForm=function(){return this.each(function(){$("input,select,textarea",this).clearFields()})},$.fn.clearFields=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==b?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==b&&(this.selectedIndex=-1)})}}(jQuery);