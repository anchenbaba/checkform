(function(d){d.fn.checkform=function(b){var c=d(this);if(c.is("form")){var e=c.attr("name")||c.attr("id")||"form1";b=d.extend({},d.checkform.defaults,b||{});b.root||d("script").each(function(c,a){miuScript=d(a).get(0).src.match(/(.*)checkform(\.min)?\.js$/);null!==miuScript&&(b.root=miuScript[1])});0==d("link[href$='checkform.css']").length&&d("head").append('<link href="'+b.root+'checkform.css" rel="stylesheet" rev="stylesheet" type="text/css" />');var h=c.find("input[validate],select[validate],textarea[validate]"),
m=[];d.each(h,function(b,a){b=d(this).attr("validate");null!=b&&""!=b&&(b=eval("("+b+")"),b.name=this.name,m.push(b))});for(h=b.items.length-1;0<=h;h--)for(var p in m)b.items[h].name==m[p].name&&b.items.splice(h,1);b.items=b.items.concat(m);h=m=null;var q=d.checkform.rules,v=function(){var b=!0,a=arguments;if(q.hasOwnProperty(a[0])){b=q[a[0]][0];var c=a[1];b=2<a.length?b.apply(arguments,[].slice.call(a,1)):d.isFunction(b)?b(c):b.test(c)}return b},y=function(f){b.fieldPwdStrong&&d.isFunction(b.fieldPwdStrong)&&
f.keyup(function(a){a=d(this).val();var g=a.length,k=0;0<g&&(k=k+(4>=g?5:8<=g?25:10)+(a.match(/[a-z]/i)?a.match(/[a-z]/)&&a.match(/[A-Z]/)?20:10:0),k+=a.match(/[0-9]/)?3<=a.match(/[0-9]/g).length?20:10:0,k+=a.match(/[\W_]/)?1<a.match(/[\W_]/g).length?25:10:0,k+=a.match(/[0-9]/)&&a.match(/[a-z]/i)?a.match(/[\W_]/)?a.match(/[a-z]/)&&a.match(/[A-Z]/)?5:3:2:0);b.fieldPwdStrong(k,f,c)})},w=function(c,a,g){a=encodeURI(a);d.ajax({type:c.ajax.method||"POST",url:c.ajax.url,data:c.name+"="+a,cache:!1,async:c.ajax.async||
!0,beforeSend:function(a){g.data("ajax_checking",0);b.fieldTips(g,"\u68c0\u6d4b\u4e2d...",e)}}).done(function(a,d,f){1==a.status?(a=a.info||c.success,b.fieldSuccess(g,a,e),g.data("ajax_checking",1)):(a=0==a.status?a.info||c.error:a.info||c.error||"\u8fd4\u56de\u4fe1\u606f\u9519\u8bef",b.fieldError(g,a,e));g.data("ajax_msg",a)}).fail(function(a,c,d){b.fieldError(g,"\u68c0\u6d4b\u5931\u8d25",e);g.data("ajax_checking",-9);g.data("ajax_msg","\u68c0\u6d4b\u5931\u8d25")}).always(function(a,b,c){})},t=function(f,
a){for(var g=d.trim(f.val()),k=!0,h="",m="boolean"===typeof a.require?a.require:!0,u=b.items.length-1;0<=u;u--)if(b.items[u].name==f.attr("name")){if(1==f.length||f.is(":radio"))if(m&&(f.is(":radio")||f.is(":checkbox"))&&!f.is(":checked"))h=void 0==a.error?"\u5fc5\u987b\u9009\u62e9":a.error,k=!1;else if(m&&""==g)h=void 0==a.error?f.is("select")?"\u5fc5\u987b\u9009\u62e9":"\u4e0d\u80fd\u4e3a\u7a7a":a.error,k=!1;else{if(""!=g){if(a.min||a.max){var l=g.length,n=a.min||0,r=a.max;h=void 0==a.error?r?"\u957f\u5ea6\u8303\u56f4\u5e94\u5728"+
n+"~"+r+"\u4e4b\u95f4":"\u957f\u5ea6\u5e94\u5927\u4e8e"+n:a.error;if(r&&(l>r||l<n)||!r&&l<n)k=!1}k&&a.rule&&(n=(l=a.to?d.trim(d("[name='"+a.to+"']",c).val()):a.value)?v(a.rule,g,l):v(a.rule,g),void 0==a.error?(h=q[a.rule][1],l&&(h+="password"==d("[name='"+a.to+"']",c).attr("type")?"\u8f93\u5165\u7684\u5bc6\u7801":l)):h=a.error,n||(k=!1));k&&a.eq&&(l=a.eq||0,g!=l&&(h=void 0==a.error?"\u5fc5\u987b\u7b49\u4e8e"+l:a.error,k=!1));k&&a.neq&&(l=a.neq||0,g==l&&(h=void 0==a.error?"\u5fc5\u987b\u4e0d\u7b49\u4e8e"+
l:a.error,k=!1));k&&a.gt&&(l=a.gt||0,g<=l&&(h=void 0==a.error?"\u5fc5\u987b\u5927\u4e8e"+l:a.error,k=!1));k&&a.gte&&(l=a.gte||0,g<l&&(h=void 0==a.error?"\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e"+l:a.error,k=!1));k&&a.lt&&(l=a.lt||0,g>=l&&(h=void 0==a.error?"\u5fc5\u987b\u5c0f\u4e8e"+l:a.error,k=!1));k&&a.lte&&(l=a.lte||0,g>l&&(h=void 0==a.error?"\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e"+l:a.error,k=!1));k&&a.between&&(l=a.between[0],n=a.between[1],g>=+l&&g<=+n||(h=void 0==a.error?"\u5fc5\u987b\u5728"+l+"\u5230"+
n:a.error,k=!1));if(k&&a.ajax)if(f.attr("last_val")!=f.val()){w(a,g,f);f.attr("last_val",f.val());continue}else if(1==f.data("ajax_checking"))a.success=f.data("ajax_msg");else if(0==f.data("ajax_checking"))h=f.data("ajax_msg"),k=!1;else{w(a,g,f);f.attr("last_val",f.val());continue}}}else if(f.is("input:checkbox")){var p=0;f.each(function(){1==this.checked&&p++});a.checked_limit&&(n=a.checked_limit[0]||1,r=a.checked_limit[1]||null,h=void 0==a.error?n==r?"\u8bf7\u5fc5\u987b\u9009\u62e9"+n+"\u9879":
r?"\u8bf7\u9009\u62e9"+n+"\u5230"+r+"\u9879\u76ee":"\u8bf7\u81f3\u5c11\u9009\u62e9"+n+"\u9879":a.error,r&&(p>r||p<n)||!r&&p<n)&&(k=!1)}if(k){f.data("is_checked",1);b.fieldSuccess(f,a.success,e);break}else return f.data("is_checked",0),b.fieldError(f,h,e),!1}return!0},x=function(){var f=!0,a=b.isBubble?!0:!1,g=!0;d.each(b.items,function(b,e){b=d("[name='"+this.name+"']",c);if(0<b.length)return 1==b.data("is_checked")?!0:a?(g=t(b,e),0==g&&1==f&&(f=!1),!0):f=t(b,e)});1==f&&d("input,select,textarea",
c).data("is_checked",0);return f},z=function(b){var a=b.url||d.trim(c.attr("action")),e=b.type||d.trim(c.attr("method"))||"POST";a&&(a=(a.match(/^([^#]+)/)||[])[1]);a=a||window.location.href||"";var f=c.serialize();d.ajax({url:a,type:e,dataType:b.dataType,data:f,beforeSend:function(a){b.beforeSend(c,a)}}).done(function(a,d,e){b.clearForm&&c.clearForm();b.success(c,a,d,e)}).fail(function(a,d,e){b.error(c,a,d,e)}).always(function(a,d,e){b.complete(c,a,d,e)});return!1};d.each(b.items,function(f,a){var g=
d("[name='"+this.name+"']",c);0<g.length&&(f="boolean"===typeof a.require?a.require:!0,b.require&&f&&(!0===b.require?f=a.tips||q[a.rule][1]||"":"placeholder"==b.require?(f=g.attr("placeholder")||a.tips||q[a.rule][1]||"",g.attr("placeholder",f),f=""):f=b.require,b.fieldRequire(g,f,e)),g.is(":file")||g.is("select")?g.change(function(){t(g,a)}).focus(function(){b.fieldTips(g,a.tips||q[a.rule]&&q[a.rule][1]||"",e)}):(g.blur(function(){t(g,a)}).focus(function(){b.fieldTips(g,a.tips||q[a.rule]&&q[a.rule][1]||
"",e)}),g.is(":password")&&y(g)))});(function(){if(!("placeholder"in document.createElement("input"))){var b=d("input[placeholder],textarea[placeholder]");d.each(b,function(a,b){a=d(this);if(""==a.val()||a.val()==a.attr("placeholder"))a.addClass("placeholder"),a.val(a.attr("placeholder")),a.attr("type")});b.focus(function(){var a=d(this);a.val()==a.attr("placeholder")&&(a.val(""),a.removeClass("placeholder"))}).blur(function(){var a=d(this);if(""==a.val()||a.val()==a.attr("placeholder"))a.addClass("placeholder"),
a.val(a.attr("placeholder")),a.attr("type")})}})();return this.each(function(){b.isAjaxSubmit?c.submit(function(){x()&&z(b);return!1}):c.submit(x)})}};d.fn.addRules=function(b){return this.each(function(){d.extend(d.checkform.rules,b||{});for(var c in d.checkform.rules)null!=d.checkform.rules[c]&&void 0!=d.checkform.rules[c]||delete d.checkform.rules[c]})};d.checkform=function(){};d.checkform.tipsname=function(b,c){""!=b&&void 0!=b||"form1"==b;c=c.replace(/(\.|\[|\])/g,"");return b+"_tips_"+c};d.checkform.fieldPwdStrong=
function(b,c,e){c=d(".checkform_pwdstrong",e);0!=c.length&&(c=c.children(".checkform_pwdstrong_line"),0==b?c.css("background","#d6d3d3"):0<b&&50>b?(c.eq(0).css("background","#ff3300"),c.eq(1).css("background","#d6d3d3"),c.eq(2).css("background","#d6d3d3"),c.eq(3).css("background","#d6d3d3")):50<=b&&60>b?(c.eq(0).css("background","#ff3300"),c.eq(1).css("background","#099"),c.eq(2).css("background","#d6d3d3"),c.eq(3).css("background","#d6d3d3")):60<=b&&80>b?(c.eq(0).css("background","#ff3300"),c.eq(1).css("background",
"#099"),c.eq(2).css("background","#060"),c.eq(3).css("background","#d6d3d3")):80<=b&&(c.eq(0).css("background","#ff3300"),c.eq(1).css("background","#099"),c.eq(2).css("background","#060"),c.eq(3).css("background","black")))};d.checkform.fieldShowFloatTips=function(b,c,e,h,m){""!=m&&void 0!=m||"form1"==m;var p=e.stayShow?"checkform_float_tips_"+d.checkform.tipsname(m,b.attr("name")):"checkform_float_tips";m=d("#"+p);h=h?"checkform_float_tips checkform_float_tips_"+h:"checkform_float_tips";m.length||
(d('<div id="'+p+'" style="position: absolute;z-index:3000"><div style="position: relative;"><div class="checkform_float_anglel"><i class="checkform_float_anglel_icon"></i></div><div class="checkform_float_tips"></div></div></div>').appendTo("body"),m=d("#"+p));p=0<b.next().length?b.nextAll(":last"):b;var q=p.offset();c?m.show():m.hide();m.css({top:q.top-2+(e.top?e.top:0),left:q.left+p.width()+18+(e.left?e.left:0),width:e.width});d(m.find(".checkform_float_tips")[0]).width(e.width-30).html(e.change?
e.change(b,c):c).attr("class",h)};d.checkform.fieldRequire=function(b,c,e){e=d.checkform.tipsname(e,b.attr("name"));var h=d("#"+e);0<h.length&&h.remove();(0<b.next().length?b.nextAll(":last"):b).after("<span id='"+e+"' class='checkform_require'> "+c+" </span>")};d.checkform.fieldTips=function(b,c,e){if(d.isEmptyObject(this.floatTips)){e=d.checkform.tipsname(e,b.attr("name"));var h=d("#"+e);0<h.length&&h.remove();c&&(0<b.next().length?b.nextAll(":last"):b).after("<span id='"+e+"' class='checkform_tips'> "+
c+" </span>")}else d.checkform.fieldShowFloatTips(b,c,this.floatTips,"",e)};d.checkform.fieldSuccess=function(b,c,e){""==c&&(c="\u221a");if(d.isEmptyObject(this.floatTips)){e=d.checkform.tipsname(e,b.attr("name"));var h=d("#"+e);0<h.length&&h.remove();void 0!=c&&(0<b.next().length?b.nextAll(":last"):b).after("<span id='"+e+"' class='checkform_success'> "+c+" </span>")}else d.checkform.fieldShowFloatTips(b,c,this.floatTips,"success",e)};d.checkform.fieldError=function(b,c,e){if(void 0==c||""==c)c=
"X";if(d.isEmptyObject(this.floatTips)){e=d.checkform.tipsname(e,b.attr("name"));var h=d("#"+e);0<h.length&&h.remove();(0<b.next().length?b.nextAll(":last"):b).after("<span id='"+e+"' class='checkform_error'> "+c+" </span>")}else d.checkform.fieldShowFloatTips(b,c,this.floatTips,"error",e)};d.ajaxsendform=function(){};d.ajaxsendform.success=function(b,c,d,h){console.log("success")};d.ajaxsendform.error=function(b,c,d,h){alert("\u6570\u636e\u53d1\u9001\u5931\u8d25")};d.ajaxsendform.complete=function(b,
c,e,h){d("input:submit",b).removeAttr("disabled");d("input:submit",b).val("\u63d0\u4ea4\u5b8c\u6210")};d.ajaxsendform.beforeSend=function(b,c){d("input:submit",b).val("\u6b63\u5728\u63d0\u4ea4");d("input:submit",b).attr("disabled","disabled")};d.checkform.defaults={items:[],isBubble:!1,isAjaxSubmit:!1,type:"POST",dataType:"json",success:d.ajaxsendform.success,error:d.ajaxsendform.error,complete:d.ajaxsendform.complete,beforeSend:d.ajaxsendform.beforeSend,clearForm:!0,root:"",require:"",fieldRequire:d.checkform.fieldRequire,
fieldTips:d.checkform.fieldTips,fieldSuccess:d.checkform.fieldSuccess,fieldError:d.checkform.fieldError,fieldPwdStrong:d.checkform.fieldPwdStrong,floatTips:{}};d.checkform.rules={eng:[/^[A-Za-z]+$/,"\u53ea\u80fd\u8f93\u5165\u82f1\u6587"],chn:[/^[\u0391-\uFFE5]+$/,"\u53ea\u80fd\u8f93\u5165\u6c49\u5b57"],mail:[/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,"\u683c\u5f0f\u4e0d\u6b63\u786e"],url:[/^http[s]?:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]':+!]*([^<>""])*$/,"\u683c\u5f0f\u4e0d\u6b63\u786e"],
currency:[/^\d+(\.\d+)?$/,"\u6570\u5b57\u683c\u5f0f\u6709\u8bef"],number:[/^\d+$/,"\u53ea\u80fd\u4e3a\u6570\u5b57"],"int":[/^[0-9]{1,30}$/,"\u53ea\u80fd\u4e3a\u6574\u6570"],"double":[/^[-\+]?\d+(\.\d+)?$/,"\u53ea\u80fd\u4e3a\u5e26\u5c0f\u6570\u7684\u6570\u5b57"],username:[/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){3,19}$/,"\u82f1\u6587\u5f00\u5934,\u6570\u5b57\u548c\u82f1\u6587\u53ca\u4e0b\u5212\u7ebf\u548c\u70b9\u7684\u7ec4\u5408\uff0c4-20\u4e2a\u5b57\u7b26"],password:[/^(\w){6,20}$/,"\u53ea\u80fd\u4e3a\u6570\u5b57\u548c\u82f1\u6587\u53ca\u4e0b\u5212\u7ebf\u7684\u7ec4\u5408\uff0c6-20\u4e2a\u5b57\u7b26"],
strongpwd:[/^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$/,"\u81f3\u5c117\u4e2a\u5b57\u7b26\uff0c\u5fc5\u987b\u540c\u65f6\u542b\u6709\u5b57\u6bcd\u548c\u6570\u5b57,\u6216\u8005\u5b57\u6bcd\u5927\u5c0f\u5199"],safe:[/>|<|,|\[|\]|\{|\}|\?|\/|\+|=|\||'|\\|"|:|;|~|!|@|#|\*|\$|%|\^|&|\(|\)|`/i,"\u4e0d\u80fd\u6709\u7279\u6b8a\u5b57\u7b26"],dbc:[/[\uff41-\uff5a\uff21-\uff3a\uff10-\uff19\uff01\uff20\uff03\uffe5\uff05\uff3e\uff06\uff0a\uff08\uff09\uff3f\uff0b\uff5b\uff5d\uff3b\uff3d\uff5c\uff1a\uff02\uff07\uff1b\uff0e\uff0c\uff0f\uff1f\uff1c\uff1e\uff40\uff5e\u3000]/,
"\u4e0d\u80fd\u6709\u5168\u89d2\u5b57\u7b26"],qq:[/[1-9][0-9]{4,}/,"\u683c\u5f0f\u4e0d\u6b63\u786e"],date:[/^((((1[6-9]|[2-9]\d)\d{2})-(0?[13578]|1[02])-(0?[1-9]|[12]\d|3[01]))|(((1[6-9]|[2-9]\d)\d{2})-(0?[13456789]|1[012])-(0?[1-9]|[12]\d|30))|(((1[6-9]|[2-9]\d)\d{2})-0?2-(0?[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))-0?2-29-))$/,"\u683c\u5f0f\u4e0d\u6b63\u786e"],telephone:[/^1\d{10}$/,"\u683c\u5f0f\u4e0d\u6b63\u786e"],mobilephone:[/^((\+86)|(86))?1[3|4|5|7|8]\d{9}$/,
"\u683c\u5f0f\u4e0d\u6b63\u786e"],zipcode:[/^[1-9]\d{5}$/,"\u683c\u5f0f\u4e0d\u6b63\u786e"],bodycard:[/^((1[1-5])|(2[1-3])|(3[1-7])|(4[1-6])|(5[0-4])|(6[1-5])|71|(8[12])|91)\d{4}((19\d{2}(0[13-9]|1[012])(0[1-9]|[12]\d|30))|(19\d{2}(0[13578]|1[02])31)|(19\d{2}02(0[1-9]|1\d|2[0-8]))|(19([13579][26]|[2468][048]|0[48])0229))\d{3}(\d|X|x)?$/,"\u683c\u5f0f\u4e0d\u6b63\u786e"],ip:[/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,
"IP\u4e0d\u6b63\u786e"],eq:[function(b,c){return b==c?!0:!1},"\u5fc5\u987b\u7b49\u4e8e"],gt:[function(b,c){return b>c?!0:!1},"\u5fc5\u987b\u5927\u4e8e"],gte:[function(b,c){return b>=c?!0:!1},"\u5fc5\u987b\u5927\u4e8e\u6216\u7b49\u4e8e"],lt:[function(b,c){return b<c?!0:!1},"\u5fc5\u987b\u5c0f\u4e8e"],lte:[function(b,c){return b<=c?!0:!1},"\u5fc5\u987b\u5c0f\u4e8e\u6216\u7b49\u4e8e"]};d.fn.clearForm=function(){return this.each(function(){d("input,select,textarea",this).clearFields()})};d.fn.clearFields=
function(){return this.each(function(){var b=this.type,c=this.tagName.toLowerCase();"text"==b||"password"==b||"textarea"==c?this.value="":"checkbox"==b||"radio"==b?this.checked=!1:"select"==c&&(this.selectedIndex=-1)})}})(jQuery);